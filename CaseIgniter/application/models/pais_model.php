<?php
/**
* Model code autogenerated by CASE IGNITER
*/
class pais_model extends CI_Model {


	/**
	* create MODEL action autogenerated by CASE IGNITER
	*/
	public function create( $nombre ) {

	$bean = R::dispense( 'pais' );
	$id_bean = R::store( $bean );


	// Regular attribute
	$bean -> nombre = $nombre;

	R::store($bean);

	return $bean->id;
}


	/**
	* update MODEL action autogenerated by CASE IGNITER
	*/
	public function update( $id, $nombre ) {

	$bean = R::load( 'pais', $id );

					
	// Regular attribute
	$bean -> nombre = $nombre;
	
	R::store($bean);
}


	/**
	* get_all MODEL action autogenerated by CASE IGNITER
	*/
	public function get_all() {
		return R::findAll('pais');
	}

	/**
	* get_filtered MODEL action autogenerated by CASE IGNITER
	*/
	public function get_filtered($filter) {

		$where_clause = [ ];

		$where_clause[] = 'nombre LIKE ?';
		$where_clause[] = '(SELECT count(*) FROM persona WHERE nombre LIKE ? AND paisnacimiento_id = pais.id) > 0';
		$f = "%$filter%";
		
		return R::findAll('pais', implode(' OR ', $where_clause) , [ $f,$f ] );
		
	}

	/**
	* delete MODEL action autogenerated by CASEIGNITER
	*/
	public function delete( $id ) {
		$bean = R::load('pais', $id );

		R::trash( $bean );
	}	
	/**
	* get_by_id MODEL action autogenerated by CASEIGNITER
	*/
	public function get_by_id( $id ) {
		return R::load('pais', $id ) ;
	}
	
}
?>